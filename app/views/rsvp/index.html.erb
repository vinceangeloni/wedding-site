<div class="page_wrapper mt40 mt60 mb80">
	<div class="page_inner">
		<h3 class="leadline"><span>RSVP</span></h3>
		<% if (!params['rsvp_code'] || @not_found) %>
		<div class="row">
			<div class="col-lg-8">
				<p class="medium"></p>
			</div>
			<div class="col-lg-4">
				<% if @not_found %>
				<div class="alert" role="alert"><strong>Oh snap!</strong> Code '<%= params['rsvp_code'].upcase %>' wasn't found. Did you type it right?</div>
				<% end %>
				<div class="well">
						<p class="text-center notmargin">Enter your RSVP code</p>
						<%= form_tag({controller: "rsvp", action: "index"}, method: "get") do %>
							<div class="form-group text-center">
								<%= text_field_tag(:rsvp_char1, nil, :class => "rsvp_char xlarge", :size => 1, :maxlength => 1, :required => true, :autofocus => true) %>
								<%= text_field_tag(:rsvp_char2, nil, :class => "rsvp_char xlarge", :size => 1, :maxlength => 1, :required => true) %>
								<%= text_field_tag(:rsvp_char3, nil, :class => "rsvp_char xlarge", :size => 1, :maxlength => 1, :required => true) %>
								<%= text_field_tag(:rsvp_char4, nil, :class => "rsvp_char xlarge", :size => 1, :maxlength => 1, :required => true) %>
								<%= hidden_field_tag(:rsvp_code, nil, :required => true) %>
							</div>
							<div class="form-group nomargin text-center">
								<%= submit_tag(nil,:class => "button primary large") %>
							</div>
						<% end %>
					</div>
				</div>
			</div>
		</div>
		<% elsif (@invitee.response == false) %>
		<div class="well shadow mb40 blue">
			<h2 class="notmargin nobmargin text-white">
				Hey <%= @invitee.name %>, thanks for replying to our invitation. 
			</h2>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<h3 class="text-center">Please select an option:</h3>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-3">&nbsp;</div>
			<div class="col-lg-6 text-center">
				<div class="button-group cf mb10">
					<button class="button large btn-attending" value="true">Attending</button>
					<button class="button large btn-attending" value="false">Not Attending</button>
				</div>

				<div id="attend_form" class="hidden mt40 well mb60 shadow text-left">
					<%= form_tag({action: "send_rsvp"}) do %>
						<div class="form-group">
							<%= label_tag "How many in your party?" %>
							<%= select_tag(:num_attending, options_for_select([['1', 1], ['2', 2],['3', 3],['4', 4]]), {prompt: "Select number of guests...", class: 'form-control'} ) %>
						</div>
						<div class="guests separator hidden">
							
						</div>
						<%= hidden_field_tag(:attending, @invitee.attending) %>
					 	<%= hidden_field_tag(:rsvp_code, @invitee.rsvp_code) %>
					 	<%= submit_tag "Send RSVP", class: "button primary large", id: "send_rsvp", disabled: true %>
					<% end %>
				</div>
				<div id="not_attend_form" class="hidden mt40 well mb60 shadow text-center">
					<h3 class="notmargin">Sorry to hear that :(</h3>
					<p class="text-medium mb40">Do let us know if you change your mind.</p>
					<%= form_tag({action: "send_rsvp"}) do %>
						<%= hidden_field_tag(:attending, @invitee.attending) %>
						<%= hidden_field_tag(:rsvp_code, @invitee.rsvp_code) %>
						<%= submit_tag "Send RSVP", class: "button primary large", id: "send_rsvp"%>
					<% end %>
				</div>
			</div>
			<div class="col-lg-3">&nbsp;</div>
		</div>
		<% else %>
		<div class="well shadow mb40 blue">
			<h2 class="notmargin text-white">
			Hey <%= @invitee.name %>, you've already responded to our RSVP
			</h2>
		</div>
		<div class="row mt20">
			<div class="col-lg-12">
			<div class="text-center">
				<a href="/details" class="button large mr10" role="button">Wedding Details</a>
				<a href="/registry" class="button large" role="button">View The Registry</a>
			</div>
			</div>
		</div>
		<% end %>
		</div>
	</div>
</div>